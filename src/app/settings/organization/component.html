<div class="container-fluid settings-layout">
    <div class="row row-no-padding">
        <div class="col-md-10 col-md-offset-1 settings-container">
            <legend>
                {{'settings.organization.title'|translate}}
            </legend>  
            <form [formGroup]="organizationForm" (ngSubmit)="save()" class="mb0">
                <div class="col-md-12 container-inline-form label-right" [ngClass]="{'fixed-height':!isInitialLoaded}">
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.name.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.name.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <input formControlName="name" placeholder="{{'organization.name.descr'|translate}}" class="form-control"/>
                            <validation-message [control]="organizationForm.controls.name"></validation-message>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'user.photo.title'|translate}}</label>
                            <small class="label-descr">
                                {{'user.photo.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="avatar-section ml0">
                                <div class="animated-background avatar"></div>
                            </div>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <div class="avatar-section">
                                <img *ngIf="organization.photo" src="{{environmentConfig.storageUrl + organization.photo}}"/>
                                <div *ngIf="!organization.photo" class="avatar-letters">{{organization.name|nameLetters}}</div>
                            </div>
                            <button [ladda]="isPhotoUploading" class="btn btn-default file-upload">
                                {{'common.sel_file'|translate}}
                                <input type="file"
                                    ngFileSelect
                                    (uploadOutput)="onUploadOutput($event)" 
                                    [uploadInput]="uploadInput"
                                    class="upload">
                            </button>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.phone.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.phone.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <input phoneLookup formControlName="phone" placeholder="{{'organization.phone.descr'|translate}}" class="form-control"/>
                            <validation-message [control]="organizationForm.controls.phone"></validation-message>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.address.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.address.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <input googleplace formControlName="address" placeholder="{{'user.address.ph'|translate}}" class="form-control"/>
                            <validation-message [control]="organizationForm.controls.address"></validation-message>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.url.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.url.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <input formControlName="url" placeholder="{{'organization.url.descr'|translate}}" class="form-control"/>
                            <validation-message [control]="organizationForm.controls.url"></validation-message>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.email.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.email.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <input formControlName="email" placeholder="{{'organization.email.descr'|translate}}" class="form-control"/>
                            <validation-message [control]="organizationForm.controls.email"></validation-message>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                    </div>
                  
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.tax.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.tax.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <input 
                                maxlength="2"
                                onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                formControlName="tax" 
                                placeholder="{{'organization.tax.descr'|translate}}" class="form-control"/>
                            <validation-message [control]="organizationForm.controls.tax"></validation-message>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                        <div class="section-label"></div>
                        <div class="section-input pt10">
                            <small class="text-muted">{{'organization.tax.explain'|translate}}</small>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.currency.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.currency.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <select formControlName="currency_code" >
                                <option *ngFor="let currency of currencies" [value]="currency.value">{{currency.value}} - {{currency.text}}</option>
                            </select>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                        <div class="section-label"></div>
                        <div class="section-input pt10">
                            <small class="text-muted">{{'organization.currency.explain'|translate}}</small>
                        </div>
                    </div>
                    <div class="form-group form-group-inline">
                        <div class="section-label">
                            <label>{{'organization.timezone.title'|translate}}</label>
                            <small class="label-descr">
                                {{'organization.timezone.descr'|translate}}
                            </small>
                        </div>
                        <div class="section-input" *ngIf="isInitialLoaded">
                            <select formControlName="timezone_offset" >
                                <option *ngFor="let timezone of timezones" [value]="timezone.value">{{timezone.text}}</option>
                            </select>
                        </div>
                        <div class="section-input loader" *ngIf="!isInitialLoaded">
                            <div class="animated-background input"></div>
                        </div>
                        <div class="section-label"></div>
                        <div class="section-input pt10">
                            <small class="text-muted">{{'organization.timezone.explain'|translate}}</small>
                        </div>
                    </div>
                    <div class="form-group text-right mb0">
                        <button (click)="save()" [ladda]="isSaving" class="btn btn-primary">
                            {{'common.form.save'|translate}}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>